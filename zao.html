<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>ZAO â€” Zion Church Lisboa</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="config.js"></script>
    <link rel="stylesheet" href="css/tokens.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <style>
        /* â”€â”€ Content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .content {
            flex: 1;
            overflow-y: auto;
            padding: 20px 18px 24px;
            background: var(--bg-input);
        }
        .content::-webkit-scrollbar { width: 4px; }
        .content::-webkit-scrollbar-thumb { background: rgba(0, 144, 152, 0.25); border-radius: 2px; }

        /* â”€â”€ Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 18px;
            margin-bottom: 10px;
            box-shadow: var(--shadow-sm);
            animation: fadeUp 0.4s ease both;
        }
        .card--highlight {
            background: linear-gradient(135deg, var(--primary-faint), rgba(0,144,152,0.01));
            border-color: var(--border-strong);
        }

        .card-badge {
            display: inline-block;
            padding: 2px 10px;
            border-radius: var(--radius-full);
            background: var(--primary-faint);
            border: 1px solid var(--border);
            font-family: var(--font-title);
            font-size: 9px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: var(--primary-dark);
            margin-bottom: 8px;
        }
        .card-title {
            font-family: var(--font-title);
            font-size: 15px;
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: 6px;
        }
        .card-text {
            font-size: 14px;
            color: var(--text-muted);
            line-height: 1.75;
        }

        /* â”€â”€ Section label â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .section-label {
            font-family: var(--font-title);
            font-size: 10px;
            letter-spacing: 3px;
            text-transform: uppercase;
            color: var(--text-faint);
            margin: 18px 0 10px;
        }

        /* â”€â”€ Curso meta (preÃ§o / carga) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .curso-meta {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 8px;
            flex-wrap: wrap;
        }
        .curso-preco {
            font-size: 13px;
            font-weight: 600;
        }
        .curso-preco.gratuito { color: var(--green); }
        .curso-preco.pago     { color: var(--primary-dark); }

        .curso-horas {
            font-size: 11px;
            color: var(--text-faint);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .curso-desc {
            font-size: 13px;
            color: var(--text-muted);
            line-height: 1.6;
            margin-top: 6px;
        }

        /* â”€â”€ Action buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .action-btns {
            display: flex;
            gap: 8px;
            margin-top: 4px;
        }

        .action-btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px;
            border-radius: var(--radius-sm);
            color: #fff;
            text-decoration: none;
            font-family: var(--font-title);
            font-size: 10px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            transition: all 0.2s;
            box-shadow: var(--shadow-sm);
        }
        .action-btn--primary {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
        }
        .action-btn--primary:hover { filter: brightness(1.08); box-shadow: var(--shadow-hover); }

        .action-btn--whatsapp {
            background: linear-gradient(135deg, #1a7a3a, #25d366);
        }
        .action-btn--whatsapp:hover { filter: brightness(1.08); box-shadow: 0 4px 14px rgba(37,211,102,0.35); }

        /* â”€â”€ Animation delays â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .d1{animation-delay:0.05s} .d2{animation-delay:0.10s}
        .d3{animation-delay:0.15s} .d4{animation-delay:0.20s}
        .d5{animation-delay:0.25s} .d6{animation-delay:0.30s}

        /* â”€â”€ Banner nav â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .banner-nav {
            position: absolute;
            bottom: 10px; left: 0; right: 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
        }
        .back-btn {
            display: flex; align-items: center; gap: 6px;
            background: rgba(255,255,255,0.92);
            border: 1px solid var(--border);
            border-radius: var(--radius-full);
            padding: 5px 14px;
            font-family: var(--font-title); font-size: 10px; letter-spacing: 1.5px;
            color: var(--primary-dark); text-decoration: none;
            backdrop-filter: blur(8px); box-shadow: var(--shadow-sm); transition: all 0.2s;
        }
        .back-btn:hover { background: #fff; border-color: var(--primary-light); }

        .page-badge {
            font-family: var(--font-title); font-size: 10px; letter-spacing: 2px;
            color: var(--primary); text-transform: uppercase;
            background: rgba(255,255,255,0.92); border: 1px solid var(--border);
            border-radius: var(--radius-full); padding: 5px 14px; backdrop-filter: blur(8px);
        }

        .banner-overlay {
            position: absolute; bottom: 0; left: 0; right: 0; height: 60px;
            background: linear-gradient(to top, rgba(255,255,255,0.95), transparent);
        }
    </style>
</head>
<body>
<div class="page-wrapper">

    <div class="banner">
        <img src="banner zion.jpg" alt="Zion Lisboa"
             onerror="this.style.display='none';document.querySelector('.banner-fallback').classList.add('show');">
        <div class="banner-fallback">
            <div class="banner-title">ZION</div>
            <div class="banner-sub">Lisboa Â· Portugal</div>
        </div>
        <div class="banner-overlay"></div>
        <div class="banner-nav">
            <a href="index.html" class="back-btn">â† InÃ­cio</a>
            <span class="page-badge">ZAO</span>
        </div>
    </div>

    <div class="gold-line"></div>

    <div class="content">

        <div class="card d1">
            <div class="card-text">O Instituto BÃ­blico ZAO convida vocÃª a embarcar numa jornada de transformaÃ§Ã£o e aprofundamento no conhecimento da BÃ­blia e de Seu divino Autor.</div>
        </div>

        <p class="section-label">Cursos DisponÃ­veis</p>
        <div id="cursos-list">
            <div class="card" style="text-align:center;color:var(--text-faint);font-size:13px;padding:24px">
                <div class="spin" style="margin:0 auto 10px"></div>
                A carregar cursos...
            </div>
        </div>

        <div class="card d2" id="action-card" style="margin-top:4px; display:none;">
            <div class="action-btns">
                <a href="chat-zion.html" class="action-btn action-btn--primary">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                    Saber Mais
                </a>
                <a id="whatsapp-btn" href="#" class="action-btn action-btn--whatsapp" target="_blank">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z"/></svg>
                    WhatsApp
                </a>
            </div>
        </div>

    </div>

    <div class="footer">
        <div class="footer-links">
            <a class="footer-link" href="https://zionchurch.org.br/" target="_blank">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                Site Oficial
            </a>
            <a class="footer-link" href="https://www.instagram.com/zionlisboa/?hl=en" target="_blank">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg>
                @ZionLisboa
            </a>
        </div>
        <div class="footer-divider"></div>
        <div class="footer-bottom">
            <div class="footer-copy" id="footer-copy">Â© 2026 Zion Lisboa â€” Todos os direitos reservados</div>
            <div class="footer-address" id="footer-addr">Rua do Centro Cultural, 11 Â· 1700-036 Alvalade Â· Lisboa, Portugal</div>
        </div>
    </div>

</div>

<script>
const SUPA_URL = window.SUPABASE_URL      || '';
const SUPA_KEY = window.SUPABASE_ANON_KEY || '';

async function sb(path) {
    const r = await fetch(`${SUPA_URL}/rest/v1/${path}`, {
        headers: { 'apikey': SUPA_KEY, 'Authorization': `Bearer ${SUPA_KEY}` }
    });
    if (!r.ok) throw new Error(`Supabase ${r.status}`);
    return r.json();
}

// Formata nÃºmero de telefone para link WhatsApp
// Remove tudo exceto dÃ­gitos e '+'
function toWhatsApp(tel, msg) {
    const num = (tel || '').replace(/[^\d+]/g, '').replace(/^\+/, '');
    const txt  = encodeURIComponent(msg || 'OlÃ¡! Gostaria de saber mais sobre os cursos do Instituto ZAO.');
    return `https://wa.me/${num}?text=${txt}`;
}

async function init() {
    try {
        // Busca cursos e configuraÃ§Ãµes em paralelo
        const [cursos, configs] = await Promise.all([
            sb('zao_cursos?select=*&ativo=eq.true&order=created_at.asc'),
            sb('configuracoes?select=chave,valor'),
        ]);

        // Mapa de configs
        const cfg = {};
        (Array.isArray(configs) ? configs : []).forEach(r => { cfg[r.chave] = r.valor; });

        // WhatsApp â€” usa o telefone das configuraÃ§Ãµes
        const tel = cfg['telefone'] || '';
        if (tel) {
            document.getElementById('whatsapp-btn').href = toWhatsApp(tel);
        } else {
            // Sem telefone configurado â€” esconde o botÃ£o
            document.getElementById('whatsapp-btn').style.display = 'none';
        }

        // Footer dinÃ¢mico
        if (cfg['copy'])    document.getElementById('footer-copy').textContent = cfg['copy'];
        const addr  = cfg['endereco']      || '';
        const cp    = cfg['codigo_postal'] || '';
        const cidade = cfg['cidade']       || '';
        const addrLine = [addr, [cp, cidade].filter(Boolean).join(' ')].filter(Boolean).join(' Â· ');
        if (addrLine) document.getElementById('footer-addr').textContent = addrLine;

        // Render cursos
        renderCursos(Array.isArray(cursos) ? cursos : []);

        // Mostra card de aÃ§Ãµes
        document.getElementById('action-card').style.display = 'block';

    } catch (e) {
        console.error('ZAO init error:', e);
        document.getElementById('cursos-list').innerHTML =
            `<div class="card" style="text-align:center;color:var(--text-faint);font-size:13px;padding:24px">
                âš ï¸ Erro ao carregar cursos. Tenta novamente.
            </div>`;
    }
}

function renderCursos(cursos) {
    if (!cursos.length) {
        document.getElementById('cursos-list').innerHTML =
            `<div class="card" style="text-align:center;color:var(--text-faint);font-size:13px;padding:24px">
                Nenhum curso disponÃ­vel de momento.
            </div>`;
        return;
    }

    document.getElementById('cursos-list').innerHTML = cursos.map((c, i) => {
        const precoHtml = c.gratuito || !c.valor || Number(c.valor) === 0
            ? `<span class="curso-preco gratuito">âœ… Gratuito</span>`
            : `<span class="curso-preco pago">ğŸ’¶ ${Number(c.valor).toFixed(2)}â‚¬</span>`;

        const horasHtml = c.carga_horaria
            ? `<span class="curso-horas">ğŸ• ${c.carga_horaria}</span>`
            : '';

        const descHtml = c.descricao
            ? `<div class="curso-desc">${c.descricao}</div>`
            : '';

        return `
        <div class="card" style="animation-delay:${(i + 2) * 0.05}s">
            <div class="card-badge">Curso ${i + 1}</div>
            <div class="card-title">${c.nome}</div>
            ${descHtml}
            <div class="curso-meta">
                ${precoHtml}
                ${horasHtml}
            </div>
        </div>`;
    }).join('');
}

init();
</script>
</body>
</html>
